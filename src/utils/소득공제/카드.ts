/**
 * 카드 소득공제 계산
 * @param 총급여 총 연봉 (비과세 제외 전 금액)
 * @param 신용카드 신용카드 연간 사용액
 * @param 체크카드 체크카드/현금영수증 연간 사용액
 * @param 대중교통 대중교통 연간 사용액
 * @param 전통시장 전통시장 연간 사용액
 * @param 문화생활 도서·공연·박물관·미술관 연간 사용액
 * @returns 공제 금액
 */
export default function 카드소득공제(
  총급여: number,
  신용카드: number,
  체크카드: number,
  대중교통: number,
  전통시장: number,
  문화생활: number
) {
  const 공제시작금액 = 총급여 * 0.25;

  const 총사용액 = 신용카드 + 체크카드 + 대중교통 + 전통시장 + 문화생활;

  // 공제 시작 금액보다 작으면 공제 없음
  if (총사용액 <= 공제시작금액) return 0;

  const 공제대상액 = 총사용액 - 공제시작금액;

  // 공제율 적용
  const 공제액 =
    신용카드 * 0.15 +
    체크카드 * 0.3 +
    대중교통 * 0.4 +
    전통시장 * 0.4 +
    문화생활 * 0.3;

  // 초과분까지만 인정
  const 최종공제 = Math.min(공제액, 공제대상액);

  // 한도 적용
  let 공제한도 = 0;
  if (총급여 <= 70_000_000) 공제한도 = 3_000_000;
  else if (총급여 <= 120_000_000) 공제한도 = 2_500_000;
  else 공제한도 = 2_000_000;

  return Math.min(최종공제, 공제한도);
}
